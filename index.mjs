// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-property@v0.2.2-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-empty-collection@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-contains@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-nullary-strided1d@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype-resolve-enum@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2enums@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ndims@v0.2.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-zero-to@v0.2.1-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-copy@v0.2.2-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-every-by@v0.2.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/object-assign@v0.2.2-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import{primitives as E}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@v0.2.2-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-unique-normalized-indices@esm/index.mjs";var T={dims:null};function F(t,e,m,p){var f,j;if(!(this instanceof F))return arguments.length>3?new F(t,e,m,p):new F(t,e,m);if(!r(t))throw new TypeError(b("null3L",t));if(!i(t.default))throw new TypeError(b('invalid argument. First argument must be an object having a "default" property and an associated method.'));if(s(t,"types")&&!n(t.types)&&!d(t.types))throw new TypeError(b('invalid argument. First argument must be an object having a "types" property whose associated value is an array-like object.'));if(s(t,"fcns")&&!a(t.fcns)&&!d(t.fcns))throw new TypeError(b('invalid argument. First argument must be an object having a "fcns" property whose associated value is an array-like object containing functions.'));if(!n(e))throw new TypeError(b("null2y",e));for(j=0;j<e.length;j++)if(f=e[j],!n(f)||f.length<1||!v(f,o))throw new TypeError(b("invalid argument. Second argument must contain arrays of data types. Value: `%s`.",e));if(!n(m)||m.length<1||!v(m,o))throw new TypeError(b("invalid argument. Third argument must be an array of data types. Value: `%s`.",m));if(this._table={default:t.default,types:t.types?h(t.types):[],fcns:t.fcns?c(t.fcns):[]},this._table.types.length!==this._table.fcns.length)throw new Error("invalid argument. First argument specifies an unexpected number of types. An output ndarray data type must be specified for each provided strided function.");return this._idtypes=e,this._odtypes=m,this._apply=arguments.length>3?l.factory(p):l,this}t(F.prototype,"assign",(function(t){var s,r,i,n,a,o,l,h,c,v,F,k,V;if(i=arguments.length,!e(t))throw new TypeError(b("null5t",t));if(c=j(t),!m(this._odtypes,c))throw new TypeError(b('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',y(this._odtypes,'", "'),c));for(a=[t],V=1;V<i&&e(o=arguments[V]);V++)a.push(o);if(V===i-1)s=arguments[V],h=!0;else if(V<i-1)throw new TypeError(b("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",V,arguments[V]));for(V=1;V<a.length;V++)if(v=j(a[V]),!m(this._idtypes[V-1],v))throw new TypeError(b('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',V,y(this._idtypes[V-1],'", "'),v));if(F=f(t),n=g({},T),h&&(l=function(t,s,e){var r;if(!w(e))return new TypeError(b("null2V",e));if(x(e,"dims")){if(t.dims=e.dims,!E(t.dims)&&!d(t.dims))return new TypeError(b("invalid option. `%s` option must be an array of integers. Option: `%s`.","dims",t.dims));if(null===(r=_(t.dims,s-1)))return new RangeError(b("invalid option. `%s` option contains an out-of-bounds dimension index. Option: [%s].","dims",y(t.dims,",")));if(r.length!==t.dims.length)return new Error(b("invalid option. `%s` option contains duplicate indices. Option: [%s].","dims",y(t.dims,",")));t.dims=r}return null}(n,F,s),l))throw l;return null===n.dims&&(n.dims=u(F)),r=[p(c)],V=function(t,s,e,r,i,n,d,a,o){var m,l,p,h;for(m=n,p=0;p<t;p++){for(l=o,h=0;h<s&&e[m+h*i]===d[l];h++)l+=a;if(h===s)return p;m+=r}return-1}(this._table.fcns.length,1,this._table.types,1,1,0,r,1,0),k=V>=0?this._table.fcns[V]:this._table.default,this._apply(k,a,n.dims),t}));export{F as default};
//# sourceMappingURL=index.mjs.map
